---
language: go

go:
  - '1.13'

env:
  global:
    - GOOS=linux
    - GOARCH=amd64

install:
  - go get -v -d -t ./...

script:
  - go test -v -race -cover ./...
  - go build -v -a -o sabercat ./cmd/sabercat

deploy:
  - provider: script
    skip_cleanup: true
    script: curl -T sabercat -u "${ARTIFACT_USER}:${ARTIFACT_PASS}" "https://artifacts.extern.campact.de/ext/sabercat/${TRAVIS_TAG}/sabercat"
    on:
      tags: true
